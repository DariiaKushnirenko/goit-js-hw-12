{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport axios from \"axios\";\n\nlet query = '';\nlet page = 1;\nlet perPage = 15;\n\nexport function getImagesByQuery(query, page) {\n    return axios\n        .get(`https://pixabay.com/api/?key=49722241-b38f1bcf58efdc2f53696c0dc&q=${query}&page=${page}&per_page=15&image_type=photo&orientation=horizontal&safesearch=true`)\n        .then(response => {\n            const data = response.data;\n            if (data.hits.length === 0) {\n                iziToast.show({\n                    title: 'Error',\n                    message: \"Sorry, there are no images matching your search query. Please try again!\",\n                    position: \"topRight\",\n                    backgroundColor: \"#ef4040\",\n                    messageColor: \"#fff\",\n                    timeout: 5000,\n                    progressBar: false,\n                    close: true,\n                    transitionIn: 'fadeInDown',\n                    transitionOut: 'fadeOutUp',\n                });\n            }\n           return {\n            images: data.hits,\n            totalHits: data.totalHits\n           };\n            })\n            .catch(error => {\n            console.log(error);\n            throw error;\n        });\n}\n","import { getImagesByQuery } from './pixabay-api';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\n\nfunction createGallery(images) {\n  const markup = images.map(image => `\n  <li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n      <img\n        class=\"gallery-image\"\n        src=\"${image.webformatURL}\"\n        alt=\"${image.tags}\"\n      />\n    </a>\n    <div class=\"info\">\n        <p><b>Likes</b> ${image.likes}</p>\n        <p><b>Views</b> ${image.views}</p>\n        <p><b>Comments</b> ${image.comments}</p>\n        <p><b>Downloads</b> ${image.downloads}</p>\n      </div>\n  </li>`).join(\"\");\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionDelay: 250,\n    scrollZoom: true\n  });\n\n  lightbox.refresh();\n}\n\nfunction clearGallery() {\n  const gallery = document.querySelector(\".gallery\");\n  gallery.innerHTML = '';  \n}\n\nfunction showLoader() {\n  const loader = document.querySelector(\".loader\"); \n  loader.classList.add(\"is-visible\");  \n}\nfunction hideLoader() {\n  const loader = document.querySelector(\".loader\"); \n  loader.classList.remove(\"is-visible\"); \n}\n\nfunction showLoadMoreButton() {\n  const MoreBtn = document.querySelector(\".MoreBtn\"); \n  MoreBtn.classList.add(\"is-visible\");  \n}\n\nfunction hideLoadMoreButton(){\n  const MoreBtn = document.querySelector(\".MoreBtn\"); \n  MoreBtn.classList.remove(\"is-visible\"); \n}\n\nexport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n};","import { getImagesByQuery } from './js/pixabay-api'\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './js/render-functions'\n\nconst form = document.querySelector('.form');\nconst MoreBtn = document.querySelector('.MoreBtn');\n\nlet query = '';\nlet page = 1;\nlet perPage = 15;\n\nform.addEventListener('submit', event => {\n  event.preventDefault(); \n\n  query = event.target.elements['search-text'].value.trim();\n  if (query === '') return;\n\n  page = 1;\n  fetchImages(query,page);\n});\n\nMoreBtn.addEventListener(\"click\", () => {\n  page += 1;\n  fetchImages(query, page);\n});\n\nfunction fetchImages(query, page) {\n  showLoader();\n\n   if (page === 1) {\n    clearGallery();\n  }\n\n  getImagesByQuery(query, page)\n    .then(({ images, totalHits }) => {\n      if (images.length === 0 && page === 1) {\n        hideLoadMoreButton();\n        hideLoader();\n        return;\n      }\n      createGallery(images);\n\n  if (page > 1) {\n  const firstImage = document.querySelector('.gallery').firstElementChild;\n  if (firstImage) {\n    const cardHeight = firstImage.getBoundingClientRect().height;\n\n    window.scrollBy({\n      top: cardHeight * 2,\n      left: 0,\n      behavior: \"smooth\",\n    });\n  }\n}\n      hideLoader();\n      if (images.length < perPage|| page * perPage >= totalHits) {\n        hideLoadMoreButton();\n        iziToast.show({\n        title: 'End of results',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: \"topRight\",\n        backgroundColor: \"#ef4040\",\n        messageColor: \"#fff\",\n        timeout: 5000,\n        progressBar: false,\n        close: true,\n        transitionIn: 'fadeInDown',\n        transitionOut: 'fadeOutUp',\n    });\n      } else {\n        showLoadMoreButton();\n      }\n    })\n    .catch(error => {\n      console.log('Fetch failed:', error);\n      hideLoader();\n      hideLoadMoreButton();\n    });\n}\n"],"names":["getImagesByQuery","query","page","axios","response","data","iziToast","error","gallery","createGallery","images","markup","image","SimpleLightbox","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","MoreBtn","perPage","event","fetchImages","totalHits","firstImage","cardHeight"],"mappings":"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"}